#{extends 'main.html' /}
#{set title:'Products' /}

<div class="container">
  <div class="row">
    <div class="col align-self-center">
    		<div class="card">
		  <div class="card-header">
		  	<div class="row">
			  	<div class="col-11">
			  		Product Selection
			  	</div>
			    <div class="col-1">
			    		<a role="button" class="btn btn-outline-primary" href="/products/new">+ add</a>
			    </div>
		    </div>
		  </div>
		  <div class="card-body">
		  	<div class="row">
			  	#{if products.size() == 0} 
				    
				#{/if}
				#{else}
				    <h4>Select a Product: </h4>
				#{/else}
		  	</div>
	    		<div class="row">
		    		#{list items:products, as:'product' }
			     <div class="col-4">
			     	<div class="card" >
					  <img class="card-img-top" src="@{Products.renderPhoto(product.id)}" alt="Card image cap">
					  <div class="card-body">
					  	<div class="row">
					  		<div class="col-8">
						   		<h5 class="card-title text-truncate" alt="${product.title}">${product.title}</h5>
						   	</div>
						   	<div class="col-4">
						   		<span class="text-secondary">${product.price.formatCurrency('USD')}</span>
						   	</div>
					    </div>
					    <p class="card-text text-truncate">${product.description}</p>
					  </div>
					  <div class="card-footer text-muted">
					    <a href="/products/purchase?productId=${product.id}" class="btn btn-primary">Purchase</a>
					  </div>
					</div>
			     </div>
		      	#{/list}
		      	#{else}
		      		<div class="container-fluid">
			      		<div class="jumbotron">
						  <h1 class="display-4">Sorry no products yet :(</h1>
						  <p class="lead">Feel free to create one using the "+ add" button on the top</p>
						  <hr class="my-4">
						</div>
					</div>
		      	#{/else}
      		</div>
    		</div>
    		</div>
    </div>
  </div>
</div>

